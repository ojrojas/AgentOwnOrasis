<mat-card class="message-input-container" [class.border-animated]="isLoading">
  <div class="input-wrapper">
    <div appearance="outline" class="message-field">
      <textarea matInput [(ngModel)]="messageText" [placeholder]="placeholder" [disabled]="isLoading"
        (keydown.enter)="onEnterPressed($event)" rows="3" #messageTextarea>
      </textarea>
    </div>


  </div>
  <mat-card-actions>
      <div>
        <select [(ngModel)]="modelText" class="select-models-field" [disabled]="isLoading">
          @for (model of this.chatStore.models()?.models; track model) {
          <option [ngValue]="model.model">{{model.name}}</option>
          }
        </select>
      </div>
      <div>
      </div>
      <div>
        <button [class]="{'active-microphone': true,  'is-active': this.isActiveMicrophone }" matMiniFab
          (click)="activeMicrophone()" [disabled]="isLoading || !modelText.trim()">
          <ng-icon name="matMicOutline" />
        </button>
        <button matMiniFab class="send-button" [disabled]="!messageText.trim() || isLoading || modelText.length === 0"
          (click)="sendMessage()">
          @if (!isLoading) {
          <ng-icon name="matSendOutline" />
          }
          @if (isLoading) {
          <ng-icon class="loading-icon" name="matHourglassEmptyOutline" />
          }
        </button>
      </div>
  </mat-card-actions>
</mat-card>
