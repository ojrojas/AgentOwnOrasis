<mat-card class="message-input-container">
  <div class="input-wrapper">
    <mat-form-field appearance="outline" class="message-field">
      <textarea matInput [(ngModel)]="messageText" [placeholder]="placeholder" [disabled]="isLoading"
        (keydown.enter)="onEnterPressed($event)" rows="1" #messageTextarea>
      </textarea>
    </mat-form-field>


  </div>
  <mat-card-actions>
    <select class="select-models-field" [disabled]="isLoading">
      @for (model of this.chatStore.models()?.models; track model) {
      <option [value]="model.model">{{model.name}}</option>
      }
    </select>
    <button [class]="{'active-microphone': true,  'is-active': this.isActiveMicrophone }" matMiniFab
      (click)="activeMicrophone()" [disabled]="isLoading">
      <ng-icon name="matMicOutline" />
    </button>
    <button matMiniFab class="send-button" [disabled]="!messageText.trim() || isLoading" (click)="sendMessage()">
      @if (!isLoading) {
      <ng-icon name="matSendOutline" />
      }
      @if (isLoading) {
      <ng-icon class="loading-icon" name="matHourglassEmptyOutline" />
      }
    </button>
  </mat-card-actions>

  @if (isLoading) {
  <div class="input-status">
    <span class="status-text typing-animation">Waiting for response</span>
  </div>
  }
</mat-card>
